@model IEnumerable<ClienteViewModel>
<link href="~/css/custom.css" rel="stylesheet" />

<div class="w-full">
</div>

<!-- Formulario -->
<form>
	<div class="bg-gray-800 text-white p-5 rounded-lg shadow-lg">
		<h2 class="text-lg font-bold mb-4">Filtro de clientes</h2>
		<div class="grid grid-cols-1 gap-4 sm:grid-cols-6">
			<div class="sm:col-span-1">
				<label for="city" class="block text-sm font-medium">Nombre de Cliente</label>
				<div class="mt-1">
					<input type="text" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" style="padding-left: 10px;">
				</div>
			</div>
		</div>
	</div>
</form>
<!-- Fin del Formulario -->
<div class="w-full mt-8">
	<div class="flex justify-between items-center bg-gray-800 text-white p-4 rounded-t-lg">
		<h3 class="text-xl font-semibold"><i class="fas fa-list mr-3"></i> Listado de Clientes</h3>
		<div>
			<a asp-action="CrearCliente" class="btn bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">Crear Cliente	</a>
		</div>
	</div>
	<!-- Tabla -->
	<div class="bg-white rounded-b-lg shadow-lg overflow-hidden">
		<table class="min-w-full leading-normal">
			<thead>
				<tr class="bg-gray-800 text-white">
					<th class="py-3 text-center">Código</th>
					<th class="py-3 text-center">Tipo Identificación</th>
					<th class="py-3 text-center">Nº Identificación</th>
					<th class="py-3 text-center">Nombre</th>
					<th class="py-3 text-center">Teléfono</th>
					<th class="py-3 text-center">Correo</th>
					<th class="py-3 text-center">Dirección</th>
					<th class="py-3 text-center">Condición de Pago</th>
					<th class="py-3 text-center">Transporte</th>
					<th class="py-3 text-center">Vendedor</th>
					<th class="py-3 text-center">Estado</th>
					<th class="py-3 text-center">Acciones</th>
				</tr>
			</thead>
			<tbody class="text-gray-700">
				@if (Model != null && Model.Any())
				{
					@foreach (var item in Model)
					{
						<tr class="border-b border-gray-200 hover:bg-gray-100">
							<td class="py-3 text-center">@Html.DisplayFor(modelItem => item.PK_Cliente)</td>
							<td class="py-3 text-center">@Html.DisplayFor(modelItem => item.TipoIdentificacion)</td>
							<td class="py-3 text-center">@Html.DisplayFor(modelItem => item.Identificacion)</td>
							<td class="py-3 text-center">@Html.DisplayFor(modelItem => item.Nombre)</td>
							<td class="py-3 text-center">@Html.DisplayFor(modelItem => item.Telefono)</td>
							<td class="py-3 text-center">@Html.DisplayFor(modelItem => item.Correo)</td>
							<td class="py-3 text-center">@Html.DisplayFor(modelItem => item.Direccion)</td>
							<td class="py-3 text-center">@Html.DisplayFor(modelItem => item.CondicionPago)</td>
							<td class="py-3 text-center">@Html.DisplayFor(modelItem => item.Transporte)</td>
							<td class="py-3 text-center">@Html.DisplayFor(modelItem => item.Vendedor)</td>
							<td class="py-3 text-center">
								@if (item.Estado)
								{
									<span class="bg-green-200 text-green-600 py-1 px-3 rounded-full text-xs">Activo</span>
								}
								else
								{
									<span class="bg-red-200 text-red-600 py-1 px-3 rounded-full text-xs">Inactivo</span>
								}
							</td>
							@* <td class="p-3 border border-gray-300"> *@
							<td>
								<div class="flex justify-center space-x-2">
									<a asp-action="ActualizarCliente" asp-route-PK="@item.PK_Cliente" class="text-blue-600 hover:text-blue-900" title="Editar">
										<i class="fas fa-edit"></i>
									</a>
									<form method="post" asp-action="DesactivarCliente" asp-route-PK="@item.PK_Cliente" onsubmit="return mostrarConfirmacion(event)">
										<button type="submit" class="text-red-600 hover:text-red-900 bg-transparent border-none p-0" title="Desactivar">
											<i class="fa-solid fa-ban"></i>
										</button>
									</form>
								</div>
							</td>
						</tr>
					}
				}
				else
				{
					<tr>
						<td colspan="14">No hay datos disponibles.</td>
					</tr>
				}
			</tbody>
		</table>
	</div>
</div>

<!-- Modal de confirmación -->
<div id="confirmacionModal" class="fixed inset-0 z-10 overflow-y-auto hidden">
	<div class="flex items-center justify-center min-h-screen">
		<div class="bg-white rounded-lg p-6 shadow-xl">
			<div class="mb-4 text-center">
				<p class="text-lg font-semibold">¿Seguro que deseas desactivar este cliente?</p>
			</div>
			<div class="text-center">
				<button onclick="confirmarDesactivacion()" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded mr-2">Confirmar</button>
				<button onclick="cancelarDesactivacion()" class="border border-gray-300 hover:bg-gray-200 font-semibold py-2 px-4 rounded">Cancelar</button>
			</div>
		</div>
	</div>
</div>



<script>

	function mostrarConfirmacion(event) {
		event.preventDefault(); 
		document.getElementById('confirmacionModal').classList.remove('hidden');
		window.confirmarDesactivacion = function () {
			event.target.closest('form').submit(); 
		};
		window.cancelarDesactivacion = function () {
			document.getElementById('confirmacionModal').classList.add('hidden');
		};

		return false; 
	}

</script>


<!--                  Modal de Crear Template                        -->
<div id="modalCrearCliente" class="modal">
	<div class="modal-content">
		<form>
			<div class="border-b border-gray-900/10 pb-12">
				<h2 class="text-base font-semibold leading-7 text-white">Creacion de nuevo cliente</h2>
				<div class="mt-4 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">

					<div class="sm:col-span-2">
						<label for="provider" class="block text-sm font-medium leading-6 text-white">Tipo de Identificacion</label>
						<div class="mt-2">
							<select id="provider" name="provider" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" style="padding-left: 10px; height: 35px;">
								<option value="">Fisico</option>
								<option value="">Juridico</option>
							</select>
						</div>
					</div>


					<div class="sm:col-span-2 ">
						<label for="city" class="block text-sm font-medium leading-6 text-white">Numero de Identificacion</label>
						<div class="mt-2">
							<input type="text" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" style="padding-left: 10px;">
						</div>
					</div>

					<div class="sm:col-span-2">
						<label for="region" class="block text-sm font-medium leading-6 text-white">Nombre</label>
						<div class="mt-2">
							<input type="text" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" style="padding-left: 10px;">
						</div>
					</div>
					<div class="sm:col-span-2">
						<label for="region" class="block text-sm font-medium leading-6 text-white">Apellidos</label>
						<div class="mt-2">
							<input type="text" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" style="padding-left: 10px;">
						</div>
					</div>
					<div class="sm:col-span-2">
						<label for="region" class="block text-sm font-medium leading-6 text-white">Telefono</label>
						<div class="mt-2">
							<input type="text" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" style="padding-left: 10px;">
						</div>
					</div>

					<div class="sm:col-span-2">
						<label for="email" class="block text-sm font-medium leading-6 text-white">Correo</label>
						<div class="mt-2">
							<input type="text" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" style="padding-left: 10px;">
						</div>
					</div>
					<div class="sm:col-span-2">
						<label for="provider" class="block text-sm font-medium leading-6 text-white">Provincia</label>
						<div class="mt-2">
							<select id="provider" name="provider" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" style="padding-left: 10px; height: 35px;">
								<option value="">San Jose</option>
								<option value="">Alajuela</option>
								<option value="">Cartago</option>
								<option value="">Heredia</option>
								<option value="">Puntarenas</option>
								<option value="">Limon</option>
								<option value="">Guanacaste</option>
							</select>
						</div>
					</div>
					<div class="sm:col-span-2">
						<label for="region" class="block text-sm font-medium leading-6 text-white">Canton</label>
						<div class="mt-2">
							<input type="text" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" style="padding-left: 10px;">
						</div>
					</div>
					<div class="sm:col-span-2">
						<label for="region" class="block text-sm font-medium leading-6 text-white">Distrito</label>
						<div class="mt-2">
							<input type="text" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" style="padding-left: 10px;">
						</div>
					</div>
					<div class="sm:col-span-2">
						<label for="region" class="block text-sm font-medium leading-6 text-white">Barrio y otras senas </label>
						<div class="mt-2">
							<input type="text" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" style="padding-left: 10px;">
						</div>
					</div>
					<fieldset>
						<legend class="block text-sm font-medium leading-6 text-white">Estado</legend>
						<div class="mt-3 flex items-center gap-x-2">
							<div class="flex items-center gap-x-2 bg-blue-100 text-blue-800 text-md font-medium px-2.5 py-0.5 rounded dark:bg-gray-700 dark:text-blue-400 border border-blue-400 ">
								<input id="push-everything" name="push-notifications" type="radio" class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600">
								<label for="push-everything" class="block text-sm font-medium leading-6 text-gray-900">Activo</label>
							</div>
							<div class="flex items-center gap-x-2 bg-red-100 text-red-800 text-md font-medium px-2.5 py-0.5 rounded dark:bg-gray-700 dark:text-blue-400 border border-red-400">
								<input id="push-email" name="push-notifications" type="radio" class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600">
								<label for="push-email" class="block text-sm font-medium leading-6 text-gray-900">Inactivo</label>
							</div>
						</div>
					</fieldset>
				</div>
				<br />
				<br />
				<button type="submit" class="rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Guardar</button>
				<button class="rounded-md bg-red-600 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600">Cancelar</button>
			</div>
		</form>
	</div>
</div>
<!--                  Final Modal de Crear Tempalte                        -->